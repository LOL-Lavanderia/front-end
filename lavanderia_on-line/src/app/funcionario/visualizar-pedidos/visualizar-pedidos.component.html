<div class="container mt-4">
  <!-- Selecione o filtro para pedidos -->
  <div class="form-group">
    <select [(ngModel)]="selectedFilter" class="form-control" (change)="applyFilter()">
      <option value="">Todos os pedidos</option>
      <option value="today">Pedidos de hoje</option>
      <option value="dateRange">Filtrar por período</option>
    </select>
  </div>

  <!-- Campos de seleção de data quando 'Filtrar por período' é selecionado -->
  <div *ngIf="selectedFilter === 'dateRange'" class="mt-3">
    <div class="form-group">
      <label for="startDate">Data Início:</label>
      <input type="date" [(ngModel)]="startDate" id="startDate" class="form-control" />
    </div>
    <div class="form-group">
      <label for="endDate">Data Fim:</label>
      <input type="date" [(ngModel)]="endDate" id="endDate" class="form-control" />
    </div>
    <button class="btn btn-primary" (click)="filterByDateRange()">Aplicar Filtro</button>
  </div>

  <!-- Exibição de mensagem caso não haja pedidos -->
  <div *ngIf="filteredOrders.length === 0 && noMatchesFound()" class="alert alert-info mt-3">
    Não há nenhum pedido com o filtro selecionado!
  </div>

  <!-- Exibição dos pedidos filtrados -->
  <div *ngIf="filteredOrders.length > 0">
    <div *ngFor="let order of filteredOrders" class="border rounded p-3 mb-3"
         [ngClass]="{
           'background-orange': order.status === 'Pago',
           'background-red': order.status === 'Rejeitado' || order.status === 'Cancelado',
           'background-green': order.status === 'Finalizado',
           'background-blue': order.status === 'Aguardando pagamento',
           'background-gray': order.status === 'Recolhido',
           'background-yellow': order.status === 'Em Aberto'
         }">
      <div class="d-flex justify-content-between">
        <h2>Cliente: {{ order.nomeCliente }}</h2>
        <h2>Pedido {{ order.id }}</h2>
        <div>
          <button *ngIf="order.status === 'Em Aberto'" class="btn btn-warning" (click)="confirmarRecolhimento(order)">Confirmar Recolhimento</button>
          <button *ngIf="order.status === 'Recolhido'" class="btn btn-success" (click)="confirmarLavagem(order)">Confirmar Lavagem</button>
          <button *ngIf="order.status === 'Pago'" class="btn btn-primary" (click)="finalizarPedido(order)">Finalizar Pedido</button>
        </div>
      </div>
      <table class="table table-striped mt-2">
        <thead>
          <tr>
            <th>Status</th>
            <th>Valor</th>
            <th>Prazo</th>
            <th>Criado em:</th>
            <th *ngIf="order.status !== 'Finalizado'">Ultima atualização:</th>
            <th *ngIf="order.status === 'Finalizado'">Finalizado em:</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>{{ order.status }}</td>
            <td>R$ {{ order.value }},00</td>
            <td>{{ order.time }} dias</td>
            <td *ngIf="order.openDate">{{ order.openDate | date: 'dd/MM/yyyy - HH:mm' }}</td>
            <td *ngIf="order.status !== 'Finalizado'">{{ order.closeDate | date: 'dd/MM/yyyy - HH:mm' }}</td>
            <td *ngIf="order.status === 'Finalizado'">{{ order.closeDate | date: 'dd/MM/yyyy - HH:mm' }}</td>
          </tr>
        </tbody>
      </table>
      <table class="table mt-2">
        <thead>
          <tr>
            <th>Tipo de Roupa</th>
            <th>Quantidade</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let clothing of order.roupas">
            <td>{{ clothing.name }}</td>
            <td>{{ clothing.quantity }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>